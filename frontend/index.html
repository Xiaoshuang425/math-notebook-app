<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidAni AI - æ™ºèƒ½æ•¸å­¸å‹•ç•«è£½ç‰‡å» </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { font-family: 'Inter', 'PingFang TC', system-ui, sans-serif; }
        .main-bg { background-color: #f8fafc; }
        .sidebar { width: 240px; background: white; border-right: 1px solid #e2e8f0; }
        .config-panel { width: 340px; background: white; border-right: 1px solid #e2e8f0; }
        .nav-item { cursor: pointer; display: flex; align-items: center; padding: 0.8rem 1.25rem; margin: 0.2rem 1rem; border-radius: 12px; font-size: 0.95rem; color: #64748b; transition: all 0.2s; }
        .nav-item.active { background: #3b82f6; color: white; font-weight: 600; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2); }
        .nav-item i { margin-right: 12px; width: 1.2rem; height: 1.2rem; }
        
        .tab-content { display: none; height: 100%; overflow-y: auto; }
        .tab-content.active { display: block; }
        
        .panel-content { display: none; }
        .panel-content.active { display: block; }
        
        .video-box { aspect-ratio: 16/9; background: #0f172a; border-radius: 24px; overflow: hidden; position: relative; border: 4px solid white; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        
        .chat-container { height: calc(100vh - 120px); display: flex; flex-direction: column; }
        .chat-messages { flex-grow: 1; overflow-y: auto; padding: 1rem; display: flex; flex-direction: column; gap: 1rem; }
        .message { max-width: 80%; padding: 0.75rem 1rem; border-radius: 1.2rem; font-size: 0.95rem; line-height: 1.5; }
        .message-ai { background: white; color: #334155; align-self: flex-start; border: 1px solid #e2e8f0; border-bottom-left-radius: 2px; }
        .message-user { background: #3b82f6; color: white; align-self: flex-end; border-bottom-right-radius: 2px; }

        .upload-zone { border: 2px dashed #e2e8f0; border-radius: 16px; padding: 1.5rem; text-align: center; cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden; }
        .upload-zone:hover { border-color: #3b82f6; background: #f8fafc; }

        .btn-toggle { transition: all 0.2s; border: 1px solid #e2e8f0; padding: 10px; border-radius: 12px; font-size: 12px; font-weight: bold; background: #f8fafc; }
        .btn-toggle.selected { background-color: #3b82f6 !important; color: white !important; border-color: #2563eb; }

        .recording-pulse { animation: pulse-red 1.5s infinite; color: #ef4444; }
        @keyframes pulse-red {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .img-preview { max-width: 100px; border-radius: 8px; border: 1px solid #ddd; margin-top: 10px; display: none; }
        
        /* äº®é»è£é£¾ */
        .glow-text { text-shadow: 0 0 15px rgba(59, 130, 246, 0.4); }

        /* å¡ç‰‡ç¿»è½‰æ•ˆæœ */
        .card-flip { perspective: 1000px; width: 320px; height: 200px; cursor: pointer; }
        .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
        .card-flip.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 24px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
        .card-front { background: white; color: #1e293b; }
        .card-back { background: #3b82f6; color: white; transform: rotateY(180deg); }
    </style>
</head>
<body class="main-bg h-screen flex overflow-hidden">

    <!-- å·¦å´ä¸»å°è¦½ -->
    <nav class="sidebar flex flex-col py-6 shrink-0">
        <div class="px-8 mb-8 flex items-center text-blue-600 font-bold text-xl italic">
            <i data-lucide="zap" class="mr-2 fill-blue-600"></i> KidAni AI
        </div>
        <div data-target="video" class="nav-item active"><i data-lucide="clapperboard"></i> å‹•ç•«è£½ç‰‡</div>
        <div data-target="chat" class="nav-item"><i data-lucide="message-square"></i> æ™ºèƒ½å°å¸«</div>
        <div data-target="notes" class="nav-item"><i data-lucide="book-open"></i> å­¸éœ¸ç­†è¨˜</div>
        <div data-target="flashcards" class="nav-item"><i data-lucide="layers"></i> è¨˜æ†¶å¡ç‰‡</div>
    </nav>

    <!-- ä¸­é–“é…ç½®é¢æ¿ -->
    <aside class="config-panel shrink-0 p-6 flex flex-col space-y-6">
        <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold text-slate-800">é…ç½®é¢æ¿</h2>
            <div id="backend-status" class="w-3 h-3 rounded-full bg-gray-300 transition-all duration-500"></div>
        </div>
        
        <!-- é¢æ¿ï¼šå½±ç‰‡è£½ä½œ -->
        <div id="panel-video" class="panel-content active space-y-4">
            <h3 class="font-bold text-sm text-blue-600 flex items-center">
                <i data-lucide="eye" class="w-4 h-4 mr-1"></i> æ­¥é©Ÿ 1ï¼šå…§å®¹è­˜åˆ¥ (Qwen-VL)
            </h3>
            <div class="grid grid-cols-2 gap-2">
                <div class="upload-zone flex flex-col items-center justify-center p-4" onclick="document.getElementById('file-input').click()">
                    <i data-lucide="file-up" class="mb-1 text-slate-400 w-5 h-5"></i>
                    <span class="text-[10px] font-bold">PDF/PPT</span>
                </div>
                <div class="upload-zone flex flex-col items-center justify-center p-4 border-blue-200 bg-blue-50" onclick="document.getElementById('file-input').click()">
                    <i data-lucide="camera" class="mb-1 text-blue-500 w-5 h-5"></i>
                    <span class="text-[10px] font-bold text-blue-600">æ‹ç…§è­˜åˆ¥</span>
                </div>
                <input type="file" id="file-input" class="hidden" accept="image/*, .pdf">
            </div>
            
            <h3 class="font-bold text-sm text-blue-600 pt-2 flex items-center">
                <i data-lucide="settings" class="w-4 h-4 mr-1"></i> æ­¥é©Ÿ 2ï¼šç”Ÿæˆè¨­å®š
            </h3>
            <div class="space-y-2">
                <label class="text-xs font-bold text-slate-400">æ•™å­¸ä¸»é¡Œ</label>
                <input id="v-topic" type="text" class="w-full p-3 bg-slate-50 border rounded-xl text-sm" placeholder="ä¸Šå‚³èª²æœ¬ç…§ç‰‡æˆ–è¼¸å…¥ä¸»é¡Œ...">
            </div>
            <div class="space-y-2">
                <label class="text-xs font-bold text-slate-400">æ•™å­¸è§’è‰²</label>
                <select id="v-character" class="w-full p-3 bg-slate-50 border rounded-xl text-sm">
                    <option value="ç†Šå¤§ç†ŠäºŒ" selected>ç†Šå‡ºæ²’ (ç†Šå¤§ç†ŠäºŒ)</option>
                    <option value="å–œç¾Šç¾Š">å–œç¾Šç¾Šèˆ‡ç°å¤ªç‹¼</option>
                    <option value="å°åšå£«">å¡é€šåšå£«</option>
                </select>
            </div>
            <button id="v-gen" disabled class="w-full bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-lg hover:bg-blue-700 disabled:bg-slate-300 transition-all flex items-center justify-center">
                <i data-lucide="play" class="w-5 h-5 mr-2 fill-white"></i> ç«‹å³ç”Ÿæˆ 3D å‹•ç•«èª²å ‚
            </button>
        </div>

        <!-- é¢æ¿ï¼šå°å¸«å°è©± -->
        <div id="panel-chat" class="panel-content space-y-4">
            <h3 class="font-bold text-sm text-blue-600">å¤šæ¨¡æ…‹æ·±åº¦å­¸ç¿’</h3>
            <div class="upload-zone" onclick="document.getElementById('chat-file-input').click()">
                <i data-lucide="book-copy" class="mx-auto mb-2 text-slate-400"></i>
                <p class="text-xs text-slate-500 font-medium">ä¸Šå‚³èª²ä»¶/é¡Œç›®åœ–ç‰‡</p>
                <p class="text-[10px] text-slate-400 mt-1">Qwen-VL å°‡ç²¾ç¢ºè§£æå…§å®¹</p>
                <img id="chat-img-preview" class="img-preview mx-auto">
            </div>
            <input type="file" id="chat-file-input" class="hidden" accept="image/*">
        </div>

        <!-- é¢æ¿ï¼šå­¸éœ¸ç­†è¨˜ -->
        <div id="panel-notes" class="panel-content space-y-4">
            <h3 class="font-bold text-sm text-blue-600">ç­†è¨˜æ¨£å¼è¨­å®š</h3>
            <div class="grid grid-cols-2 gap-2">
                <button class="btn-toggle selected">ç²¾ç°¡æ‘˜è¦</button>
                <button class="btn-toggle">è©³ç´°æ¨å°</button>
            </div>
            <button class="w-full py-3 bg-slate-800 text-white rounded-xl font-bold text-sm flex items-center justify-center">
                <i data-lucide="download" class="w-4 h-4 mr-2"></i> å°å‡ºç‚º PDF
            </button>
        </div>

        <!-- é¢æ¿ï¼šè¨˜æ†¶å¡ç‰‡ -->
        <div id="panel-flashcards" class="panel-content space-y-4">
            <h3 class="font-bold text-sm text-blue-600">è¤‡ç¿’æ¨¡å¼é¸æ“‡</h3>
            <div class="grid grid-cols-2 gap-2">
                <button class="btn-toggle selected">æ™®é€šç·´ç¿’</button>
                <button class="btn-toggle">è‰¾è³“æµ©æ–¯</button>
            </div>
            <div class="p-3 bg-blue-50 border border-blue-100 rounded-xl">
                <p class="text-[10px] text-blue-600 italic leading-tight">
                    è‰¾è³“æµ©æ–¯æ¨¡å¼ï¼šAI æœƒåœ¨æ‚¨å³å°‡éºå¿˜çš„é»ƒé‡‘æ™‚é–“é»è‡ªå‹•æ¨é€é€™å¼µå¡ç‰‡ã€‚
                </p>
            </div>
        </div>
    </aside>

    <!-- å³å´ä¸»è¦å…§å®¹å€ -->
    <main class="flex-grow p-8 overflow-hidden">
        
        <!-- Tab: å½±ç‰‡è£½ä½œ -->
        <div id="tab-video" class="tab-content active h-full">
            <div class="space-y-6">
                <div class="video-box flex items-center justify-center">
                    <div id="v-main-display" class="w-full h-full flex items-center justify-center text-center">
                        <div class="px-6">
                            <h1 class="text-white text-3xl font-black mb-2 tracking-wider glow-text">KidAni AI æ™ºèƒ½å‹•ç•«ç³»çµ±</h1>
                            <p class="text-blue-400 font-bold text-lg">æ‹ç…§å³åˆ»ç”Ÿæˆ 3D æ•¸å­¸å‹•ç•«</p>
                        </div>
                    </div>
                    <div id="v-loader" class="hidden absolute inset-0 bg-black/90 flex flex-col items-center justify-center text-white z-10 text-center px-4">
                        <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent animate-spin rounded-full mb-4"></div>
                        <p id="v-status" class="font-bold text-xl">Qwen-VL æ­£åœ¨è®€å–èª²æœ¬å…§å®¹...</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-3 gap-4">
                    <div class="col-span-1 bg-white p-4 rounded-3xl border shadow-sm h-56 overflow-y-auto">
                        <h3 class="font-bold mb-3 text-sm flex items-center"><i data-lucide="list" class="w-4 h-4 mr-2 text-blue-500"></i>æ•™å­¸ç›®éŒ„</h3>
                        <div id="v-playlist" class="space-y-2 text-xs text-slate-400 italic">å°šæœªç”Ÿæˆç« ç¯€...</div>
                    </div>
                    <div class="col-span-2 bg-white p-4 rounded-3xl border shadow-sm">
                        <h3 class="font-bold mb-2 text-sm flex items-center"><i data-lucide="quote" class="w-4 h-4 mr-2 text-blue-500"></i>ç•¶å‰æ—ç™½</h3>
                        <div id="v-narration" class="text-sm text-slate-600 h-32 overflow-y-auto leading-relaxed italic">ç­‰å¾…è£½ä½œå®Œæˆå¾Œé¡¯ç¤ºå…§å®¹...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: æ™ºèƒ½å°å¸« -->
        <div id="tab-chat" class="tab-content h-full">
            <div class="chat-container">
                <div class="chat-messages" id="chat-box">
                    <div class="message message-ai">ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯é…å‚™ <b>Qwen-VL</b> çš„ AI å°å¸«ã€‚æ‹ä¸‹é¡Œç›®ï¼Œæˆ‘èƒ½ç‚ºä½ è§£æä¸¦ç”Ÿæˆå‹•ç•«ï¼</div>
                </div>
                <div class="p-4 bg-white border-t flex gap-2 items-center">
                    <input id="chat-input" type="text" placeholder="è¼¸å…¥å•é¡Œ..." class="flex-grow p-3 bg-slate-50 border rounded-xl outline-none">
                    <button class="bg-blue-500 text-white p-3 px-6 rounded-xl font-bold">ç™¼é€</button>
                </div>
            </div>
        </div>

        <!-- Tab: å­¸éœ¸ç­†è¨˜ -->
        <div id="tab-notes" class="tab-content h-full">
            <div class="max-w-3xl mx-auto space-y-6">
                <div class="bg-white p-8 rounded-[32px] border shadow-sm min-h-[500px]">
                    <div class="flex justify-between items-start mb-6 border-b pb-4">
                        <div>
                            <h2 class="text-2xl font-black text-slate-800">ğŸ“– AI å­¸éœ¸éš¨å ‚ç­†è¨˜</h2>
                            <p class="text-xs text-slate-400 mt-1">æ ¹æ“š Qwen-VL è§£æèˆ‡ Sora-2 å½±ç‰‡è‡ªå‹•ç”Ÿæˆ</p>
                        </div>
                        <span class="bg-blue-100 text-blue-600 text-[10px] px-3 py-1 rounded-full font-bold">è‡ªå‹•æ›´æ–°ä¸­</span>
                    </div>
                    <div class="space-y-6 text-slate-600">
                        <div class="p-4 bg-slate-50 rounded-2xl">
                            <h4 class="font-bold text-blue-600 mb-2 flex items-center"><i data-lucide="key" class="w-4 h-4 mr-2"></i> æ ¸å¿ƒå®šç¾©</h4>
                            <p class="text-sm">å°šæœªé–‹å§‹å­¸ç¿’ï¼Œå®Œæˆå½±ç‰‡ç”Ÿæˆå¾Œï¼ŒAI å°‡è‡ªå‹•æå–é—œéµæ¦‚å¿µã€‚</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-2xl">
                            <h4 class="font-bold text-blue-600 mb-2 flex items-center"><i data-lucide="function-square" class="w-4 h-4 mr-2"></i> å…¬å¼ç¸½çµ</h4>
                            <div class="h-20 border-2 border-dashed border-slate-200 rounded-xl flex items-center justify-center italic text-xs text-slate-400">
                                ç­‰å¾…æå– LaTeX å…¬å¼...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: è¨˜æ†¶å¡ç‰‡ -->
        <div id="tab-flashcards" class="tab-content h-full">
            <div class="flex flex-col items-center justify-center h-full space-y-8">
                <div id="flashcard" class="card-flip">
                    <div class="card-inner">
                        <div class="card-front">
                            <span class="text-[10px] text-blue-500 font-bold mb-4">é¡Œç›® (æ­£é¢)</span>
                            <p class="text-lg font-bold text-slate-700">å°šæœªç”Ÿæˆå¡ç‰‡</p>
                            <p class="text-xs text-slate-400 mt-4">é»æ“Šç¿»è½‰æŸ¥çœ‹ç­”æ¡ˆ</p>
                        </div>
                        <div class="card-back">
                            <span class="text-[10px] text-white/70 font-bold mb-4">è§£æ (èƒŒé¢)</span>
                            <p class="text-base font-medium">è«‹å…ˆç”Ÿæˆæ•™å­¸å½±ç‰‡</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-4">
                    <button class="w-12 h-12 rounded-full border flex items-center justify-center hover:bg-red-50 text-red-400 transition-all"><i data-lucide="x"></i></button>
                    <button class="w-12 h-12 rounded-full border flex items-center justify-center hover:bg-orange-50 text-orange-400 transition-all"><i data-lucide="rotate-ccw"></i></button>
                    <button class="w-12 h-12 rounded-full border flex items-center justify-center hover:bg-green-50 text-green-400 transition-all"><i data-lucide="check"></i></button>
                </div>

                <div class="flex space-x-2">
                    <div class="w-2 h-2 rounded-full bg-blue-500"></div>
                    <div class="w-2 h-2 rounded-full bg-slate-200"></div>
                    <div class="w-2 h-2 rounded-full bg-slate-200"></div>
                </div>
            </div>
        </div>

    </main>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();

            // å°èˆªèˆ‡åˆ†é 
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.onclick = () => {
                    const target = nav.getAttribute('data-target');
                    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                    nav.classList.add('active');
                    document.querySelectorAll('.panel-content').forEach(p => p.classList.remove('active'));
                    document.getElementById(`panel-${target}`)?.classList.add('active');
                    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
                    document.getElementById(`tab-${target}`)?.classList.add('active');
                };
            });

            // æŒ‰éˆ•åˆ‡æ›
            document.querySelectorAll('.btn-toggle').forEach(btn => {
                btn.onclick = () => {
                    btn.parentElement.querySelectorAll('.btn-toggle').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                };
            });

            // å¡ç‰‡ç¿»è½‰
            document.getElementById('flashcard').onclick = function() {
                this.classList.toggle('is-flipped');
            };

            // Qwen-VL åœ–ç‰‡è­˜åˆ¥æ¨¡æ“¬ (å°å¸«ä»‹é¢)
            const chatFileInput = document.getElementById('chat-file-input');
            const preview = document.getElementById('chat-img-preview');
            const chatBox = document.getElementById('chat-box');

            chatFileInput.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (re) => {
                        preview.src = re.target.result;
                        preview.style.display = 'block';
                        
                        const msg = document.createElement('div');
                        msg.className = "message message-ai";
                        msg.innerHTML = "âœ¨ <b>Qwen-VL è¦–è¦ºå¼•æ“æ­£åœ¨æƒæ...</b>";
                        chatBox.appendChild(msg);
                        chatBox.scrollTop = chatBox.scrollHeight;

                        setTimeout(() => {
                            msg.innerHTML = "âœ… è­˜åˆ¥æˆåŠŸï¼åœ–ä¸­æ˜¯ä¸€é“é—œæ–¼ã€Œåˆ†æ•¸ä¹˜æ³•ã€çš„æ‡‰ç”¨é¡Œã€‚æˆ‘å·²ç¶“å°‡é—œéµæ­¥é©Ÿæ•´ç†é€²<b>ã€Œå­¸éœ¸ç­†è¨˜ã€</b>ä¸¦ç”Ÿæˆäº†å°æ‡‰çš„<b>ã€Œè¨˜æ†¶å¡ç‰‡ã€</b>ã€‚æ‚¨å¯ä»¥é»æ“Šã€Œå‹•ç•«è£½ç‰‡ã€ä¾†æŸ¥çœ‹ 3D è§£èªªå½±ç‰‡ï¼";
                            // æ›´æ–°ç­†è¨˜ä½”ä½
                            document.querySelector('#tab-notes .text-sm').innerText = "é€™å¼µåœ–ç‰‡æ¶‰åŠåˆ†æ•¸èˆ‡æ•´æ•¸çš„ç›¸ä¹˜é‹ç®—ï¼Œæ ¸å¿ƒåœ¨æ–¼ç†è§£åˆ†å­ç›¸ä¹˜ã€åˆ†æ¯ä¸è®Šçš„é‚è¼¯ã€‚";
                            // æ›´æ–°å¡ç‰‡ä½”ä½
                            document.querySelector('.card-front p').innerText = "åˆ†æ•¸ç›¸ä¹˜æ™‚ï¼Œåˆ†æ¯ä»£è¡¨ä»€éº¼ï¼Ÿ";
                            document.querySelector('.card-back p').innerText = "ä»£è¡¨æ•´é«”çš„ç­‰ä»½ç¸½é‡ï¼Œé‹ç®—æ™‚åˆ†æ¯ä¸è®Šï¼Œåˆ†å­èˆ‡æ•´æ•¸ç›¸ä¹˜ã€‚";
                        }, 2000);
                    };
                    reader.readAsDataURL(file);
                }
            };

            // ç‹€æ…‹é€£ç·šæ¨¡æ“¬
            const dot = document.getElementById('backend-status');
            dot.className = "w-3 h-3 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]";
            document.getElementById('v-gen').disabled = false;
        });
    </script>
</body>
</html>